import 'dart:convert';

import 'package:flutter/cupertino.dart';
import 'package:flutter_ai_writing_assistant/models/assistant_result_model.dart';
import 'package:flutter_ai_writing_assistant/utils/constants.dart';
import 'package:google_generative_ai/google_generative_ai.dart';

class AssistantController {

  final List<Part> parts = [
    TextPart("Get the language code of the sentence. \nCorrect any misspelled words. \nList changed words, \nGive the reason of the changes inEnglish, French, Swahili, Lingala and Hindi\nConvert the correction in quill delta with all edited words as links with their index as value.\nCheck that the number of the links in corrextion_quill are equal to number of edits, if not, fix that\nSuggest a better form of the sentence (in the same language with the sentence)"),
    TextPart("sentence: C est une joie immensee de savoir que mon artile de blog où j'ai écrit il y a deux semaines a ete mis en avant par Hashnode"),
    TextPart("result: {\n\t\"sentence_lang\": \"fr\",\n\t\"correction\": \"C'est une joie immenses de savoir que mon article de blog où j'ai écrit il y a deux semaines a ete mis en avant par Hashnode\",\n\t\"edits\": [\n\t\t{\n\t\t\t\"old\": \"C est\",\n\t\t\t\"new\": \"C'est\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Apostrophe error\",\n\t\t\t\t\"fr\": \"Erreur d'apostrophe\",\n\t\t\t\t\"sw\": \"Kosa la Apostrophe\",\n\t\t\t\t\"li\": \"Libunga ya apostrophe\",\n\t\t\t\t\"hi\": \"एपोस्ट्रोफी त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"immensee\",\n\t\t\t\"new\": \"immenses\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Spelling error\",\n                                \"fr\": \"Erreur d'orthographe\",\n                                \"sw\": \"Kosa la tahajia\",\n                                \"li\": \"Libunga ya ko kɔta\",\n                                \"hi\": \"वर्तनी संबंधी त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"artile\",\n\t\t\t\"new\": \"article\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Spelling error\",\n                                \"fr\": \"Erreur d'orthographe\",\n                                \"sw\": \"Kosa la tahajia\",\n                                \"li\": \"Libunga ya ko kɔta\",\n                                \"hi\": \"वर्तनी संबंधी त्रुटि\"\n\t\t\t}\n\t\t}\n\t],\n\"correction_quill\": [{\"insert\":\"C'est\",\"attributes\":{\"link\":\"0\"}},{\"insert\":\" une joie \"},{\"insert\":\"immenses\",\"attributes\":{\"link\":\"1\"}},{\"insert\":\" de savoir que mon \"},{\"insert\":\"article\",\"attributes\":{\"link\":\"2\"}},{\"insert\":\" de blog où j'ai écrit il y a deux semaines a ete mis en avant par Hashnode\\\\n\"}],\n\t\"suggestion\": \"Je suis ravi(e) de voir mon article de blog, rédigé il y a deux semaines, mis en avant par Hashnode.\"\n}"),
    TextPart("sentence: I have eating water and drunk amy apples, I am  non hangry today I will tomorrow again!!!"),
    TextPart("result: {\n\t\"sentence_lang\": \"en\",\n\t\"correction\": \"I have eaten water and drunk many apples, I am not hungry today but I will be tomorrow\",\n\t\"edits\": [\n\t\t{\n\t\t\t\"old\": \"eating\",\n\t\t\t\"new\": \"eaten\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"tense error\",\n\t\t\t\t\"fr\": \"erreur de temps\",\n\t\t\t\t\"sw\": \"kosa la wakati\",\n\t\t\t\t\"li\": \"libunga ya ntango\",\n\t\t\t\t\"hi\": \"काल त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"amy\",\n\t\t\t\"new\": \"many\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Homophonic confusion, \\\"many\\\" is more appropriate in this context.\",\n\t\t\t\t\"fr\": \"Confusion homophonique, \\\"many\\\" est plus adapté dans ce contexte.\",\n\t\t\t\t\"sw\": \"Uchanganyaji wa homophonic, \\\"many\\\" inafaa zaidi katika muktadha huu.\",\n\t\t\t\t\"li\": \"Likuluku ya homophonic, \\\"many\\\" eleki kaka na kati ya contexte oyo.\",\n\t\t\t\t\"hi\": \"होमोफोनिक भ्रम, \\\"many\\\" इस संदर्भ में अधिक उपयुक्त है।\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"non\",\n\t\t\t\"new\": \"not\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Vocabulary error, \\\"not\\\" is more appropriate in this context.\",\n\t\t\t\t\"fr\": \"Erreur de vocabulaire, \\\"not\\\" est plus adapté dans ce contexte.\",\n\t\t\t\t\"sw\": \"Hitilafu ya msamiati, \\\"not\\\" inafaa zaidi katika muktadha huu.\",\n\t\t\t\t\"li\": \"Esobe ya vocabulaire, \\\"not\\\" eleki kaka na contexte oyo.\",\n\t\t\t\t\"hi\": \"शब्दावली त्रुटि, इस संदर्भ में \\\"not\\\" अधिक उपयुक्त है।\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"hangry\",\n\t\t\t\"new\": \"hungry\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Lexical choice, \\\"hungry\\\" is more appropriate in this context.\",\n\t\t\t\t\"fr\": \"Choix lexical, \\\"hungry\\\" est plus approprié dans ce contexte.\",\n\t\t\t\t\"sw\": \"Uchaguzi wa msamiati, \\\"hungry\\\" inafaa zaidi katika muktadha huu.\",\n\t\t\t\t\"li\": \"Komba ya vocabulaire, \\\"hungry\\\" eleki kaka na contexte oyo.\",\n\t\t\t\t\"hi\": \"शब्द चयन, इस संदर्भ में \\\"hungry\\\" अधिक उपयुक्त है।\"\n\t\t\t}\n\t\t}\n\t],\n\"correction_quill\": [{\"insert\":\"I have \"},{\"insert\":\"eaten\",\"attributes\":{\"link\":\"0\"}},{\"insert\":\" water and drunk \"},{\"insert\":\"many\",\"attributes\":{\"link\":\"1\"}},{\"insert\":\" apples, I am \"},{\"insert\":\"not\",\"attributes\":{\"link\":\"2\"}},{\"insert\":\" \"},{\"insert\":\"hungry\",\"attributes\":{\"link\":\"3\"}},{\"insert\":\" today but I will be tomorrow.\\\\n\"}],\n\t\"suggestion\": \"I've had water and plenty of apples today, so I'm not hungry now, but I might be tomorrow.\"\n}"),
    TextPart("sentence: J suis beaucoup d argent"),
    TextPart("result: {\n\t\"sentence_lang\": \"fr\",\n\t\"correction\": \"J'ai beaucoup d'argent\",\n\t\"edits\": [\n\t\t{\n\t\t\t\"old\": \"suis\",\n\t\t\t\"new\": \"ai\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"tense error\",\n\t\t\t\t\"fr\": \"erreur de temps\",\n\t\t\t\t\"sw\": \"kosa la wakati\",\n\t\t\t\t\"li\": \"libunga ya ntango\",\n\t\t\t\t\"hi\": \"काल त्रुटि\"\n\t\t\t}\n\t\t}\n\t],\n\"correction_quill\": [{\"insert\":\"J'\"},{\"insert\":\"ai\",\"attributes\":{\"link\":\"0\"}},{\"insert\":\" beaucoup d'argent\\\\n\"}],\n\t\"suggestion\": \"Je suis très aisé financièrement.\"\n}"),
    TextPart("sentence: como mazanas :)"),
    TextPart("result: {\n\t\"sentence_lang\": \"es\",\n\t\"correction\": \"Como manzanas :)\",\n\t\"edits\": [\n\t\t{\n\t\t\t\"old\": \"como\",\n\t\t\t\"new\": \"Como\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Capitalization error\",\n\t\t\t\t\"fr\": \"erreur de majuscule\",\n\t\t\t\t\"sw\": \"kosa la herufi kubwa\",\n\t\t\t\t\"li\": \"libunga ya etanda\",\n\t\t\t\t\"hi\": \"कैपिटलाइजेशन त्रुटि\"\n\t\t\t}\n\t\t}\n\t],\n\"correction_quill\": [{\"insert\":\"Como\",\"attributes\":{\"link\":\"0\"}},{\"insert\":\" manzanas\\\\n\"}],\n\t\"suggestion\": \"Disfruto de comer manzanas :)\"\n}"),
    TextPart("sentence: Hi Lena,\n\nI hope you are doing well. I just wanted to ensure that you also received the Google Play Store notification about the issue with your developer account.\n\nPlay Console developer accounts are intended for developers who actively publish and maintain apps. To protect the safety of app users, developer accounts that aren't used are closed.\n\nTo fix this, we have to upload a new version. We don't need to add features; on my side, I just have to update development dependencies, build a new version, and update the app on the Google Play Store. If this action is not done by May 18th, the account will be closed.\n\nLet me know if you're interested in fixing that.\nThank you.\nLoïc Y."),
    TextPart("result: {\n\t\"sentence_lang\": \"en\",\n\t\"correction\": \"Hi Lena,\\n\\nI hope you are doing well. I just wanted to ensure that you also received the Google Play Store notification about the issue with your developer account.\\n\\nPlay Console developer accounts are intended for developers who actively publish and maintain apps. To protect the safety of app users, developer accounts that aren't used are closed.\\n\\nTo fix this, we have to **upload** a new version. We don't need to add features; on my side, I just have to update development dependencies, build a new version, and update the app on the Google Play Store. If this action is not done by May 18th, the account will be closed.\\n\\nLet me know if you're interested in fixing that.\\nThank you.\\nLoïc Y.\",\n\t\"edits\": [\n\t\t{\n\t\t\t\"old\": \"have to upload\",\n\t\t\t\"new\": \"upload\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"redundant phrase\",\n\t\t\t\t\"fr\": \"expression redondante\",\n\t\t\t\t\"sw\": \"sentensi za ziada\",\n\t\t\t\t\"li\": \"lokuta lolenge\",\n\t\t\t\t\"hi\": \"अनावश्यक मुहावरा\"\n\t\t\t}\n\t\t}\n\t],\n\"correction_quill\": [{\"insert\":\"Hi Lena, \"},{\"insert\":\"\\n\\nI hope you are doing well. I just wanted to ensure that you also received the Google Play Store notification about the issue with your developer account.\\n\\nPlay Console developer accounts are intended for developers who actively publish and maintain apps. To protect the safety of app users, developer accounts that aren't used are closed.\\n\\nTo fix this, we have to\"},{\"insert\":\"upload\",\"attributes\":{\"link\":\"0\"}},{\"insert\":\" a new version. We don't need to add features; on my side, I just have to update development dependencies, build a new version, and update the app on the Google Play Store. If this action is not done by May 18th, the account will be closed.\\n\\nLet me know if you're interested in fixing that.\\nThank you.\\nLoïc Y.\\\\n\"}],\n\t\"suggestion\": \"Hi Lena,\\n\\nI hope everything is going smoothly for you. I'm writing to confirm whether you received the notification from Google Play Store regarding an issue with your developer account.\\n\\nGoogle Play Console developer accounts are meant for those who actively publish and manage apps. Accounts that remain inactive are closed to protect users' safety.\\n\\nTo resolve this, we need to upload a new version of your app. This doesn't require any new features; I simply need to update the development dependencies, build a new version, and publish it to the Google Play Store. If we don't take action by May 18th, the account will be closed.\\n\\nPlease let me know if you'd like me to proceed with this.\\n\\nThank you,\\nLoïc Y.\"\n}"),
    TextPart("sentence: I love read book because book I study a lot in books for mee it is better that reading with Internet who agree with wath I am saying right now?"),
    TextPart("result: {\n\t\"sentence_lang\": \"en\",\n\t\"correction\": \"I love to read books because I study a lot from books. For me, it is better than reading on the Internet. Who agrees with what I am saying right now?\",\n\t\"edits\": [\n\t\t{\n\t\t\t\"old\": \"read\",\n\t\t\t\"new\": \"to read\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"tense error\",\n\t\t\t\t\"fr\": \"erreur de temps\",\n\t\t\t\t\"sw\": \"kosa la wakati\",\n\t\t\t\t\"li\": \"libunga ya ntango\",\n\t\t\t\t\"hi\": \"काल त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"book because book\",\n\t\t\t\"new\": \"books because\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"redundant phrase\",\n\t\t\t\t\"fr\": \"expression redondante\",\n\t\t\t\t\"sw\": \"sentensi za ziada\",\n\t\t\t\t\"li\": \"lokuta lolenge\",\n\t\t\t\t\"hi\": \"अनावश्यक मुहावरा\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"mee\",\n\t\t\t\"new\": \"me\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Spelling error\",\n\t\t\t\t\"fr\": \"Erreur d'orthographe\",\n\t\t\t\t\"sw\": \"Hitilafu ya herufi\",\n\t\t\t\t\"li\": \"Esobe ya lituka\",\n\t\t\t\t\"hi\": \"वर्तनी त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"who agree with wath I am saying right now\",\n\t\t\t\"new\": \"Who agrees with what I am saying right now?\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Grammatical and spelling corrections to the original text.\",\n\t\t\t\t\"fr\": \" Corrections grammaticales et orthographiques du texte original\",\n\t\t\t\t\"sw\": \"Marekebisho ya kisarufi na ya herufi.\",\n\t\t\t\t\"li\": \"Kokoma ya lisusu.\",\n\t\t\t\t\"hi\": \"व्याकरण और वर्तनी सुधार।\"\n\t\t\t}\n\t\t}\n\t],\n\"correction_quill\": [{\"insert\":\"I love \"},{\"insert\":\"to read\",\"attributes\":{\"link\":\"0\"}},{\"insert\":\" \"},{\"insert\":\"books because\",\"attributes\":{\"link\":\"1\"}},{\"insert\":\" I study a lot from books. For\"},{\"insert\":\"me\",\"attributes\":{\"link\":\"2\"}},{\"insert\":\", it is better than reading on the Internet. \"},{\"insert\":\"Who agrees with what I am saying right now?\\\\n\",\"attributes\":{\"link\":\"3\"}}],\n\t\"suggestion\": \"I love reading because I learn a lot from books. I find it more effective than browsing the Internet. Does anyone else agree?\"\n}"),
    TextPart("sentence: Il y a eux leur ils étaient assis dans le canapé en train de regarder la télé quand il a décidé de leur faire cuire le dîner. Il est allé au frigo et a pris la paule et les œufs. Il a allumé la cuisinière mais a accidentellement appuyé sur la pause et les œufs ont volé en éclaboussant le comptoir. Il pensait que c'était sans importance, alors il les a simplement essuyés et a mis la pause dans la poêle. Alors qu'il faisait frire la pause, il s'est rendu compte qu'il avait fait une erreur de lecture parce qu'il voulait en fait faire cuire du bacon. Il est ensuite allé au magasin acheter la bonne nourriture et leur a préparé un délicieux dîner."),
    TextPart("result: {\n\t\"sentence_lang\": \"fr\",\n\t\"correction\": \"Il y avait eux; ils étaient assis dans le canapé en train de regarder la télé quand il a décidé de leur faire cuire le dîner. Il est allé au frigo et a pris le poulet et les œufs. Il a allumé la cuisinière mais a accidentellement appuyé sur le gaz et les œufs ont volé en éclaboussant le comptoir. Il pensait que c'était sans importance, alors il les a simplement essuyés et a mis le bacon dans la poêle. Alors qu'il faisait frire le bacon, il s'est rendu compte qu'il avait fait une erreur de lecture parce qu'il voulait en fait faire cuire du bacon. Il est ensuite allé au magasin acheter la bonne nourriture et leur a préparé un délicieux dîner.\",\n\t\"edits\": [\n\t\t{\n\t\t\t\"old\": \"eux leur\",\n\t\t\t\"new\": \"eux; ils\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"repetition error\",\n\t\t\t\t\"fr\": \"erreur de répétition\",\n\t\t\t\t\"sw\": \"kosa la kurudia\",\n\t\t\t\t\"li\": \"libunga ya kokila\",\n\t\t\t\t\"hi\": \"दोहराव त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"paule\",\n\t\t\t\"new\": \"poulet\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Vocabulary or typographical error\",\n\t\t\t\t\"fr\": \"Erreur de vocabulaire ou de typographie\",\n\t\t\t\t\"sw\": \"Hitilafu ya msamiati au ya kuandika\",\n\t\t\t\t\"li\": \"Esobe ya vocabulaire to ya typographie\",\n\t\t\t\t\"hi\": \"शब्दावली या टाइपोग्राफिकल त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"pause\",\n\t\t\t\"new\": \"gaz\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Vocabulary or typographical error, \\\"gaz\\\" is the correct term in this context.\",\n\t\t\t\t\"fr\": \"Erreur de vocabulaire ou de typographie, \\\"gaz\\\" est le mot approprié dans ce contexte.\",\n\t\t\t\t\"sw\": \"Hitilafu ya msamiati au ya kuandika, \\\"gaz\\\" ni neno sahihi katika muktadha huu.\",\n\t\t\t\t\"li\": \"Esobe ya vocabulaire to ya typographie, \\\"gaz\\\" ezali liloba ya solo na contexte oyo.\",\n\t\t\t\t\"hi\": \"शब्दावली या टाइपोग्राफिकल त्रुटि, इस संदर्भ में \\\"gaz\\\" अधिक उपयुक्त है।\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"pause\",\n\t\t\t\"new\": \"bacon\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Vocabulary or typographical error, \\\"bacon\\\" is the correct term in this context.\",\n\t\t\t\t\"fr\": \"Erreur de vocabulaire ou de typographie, \\\"bacon\\\" est le mot approprié dans ce contexte.\",\n\t\t\t\t\"sw\": \"Hitilafu ya msamiati au ya kuandika, \\\"bacon\\\" ni neno sahihi katika muktadha huu.\",\n\t\t\t\t\"li\": \"Esobe ya vocabulaire to ya typographie, \\\"bacon\\\" ezali liloba ya solo na contexte oyo.\",\n\t\t\t\t\"hi\": \"शब्दावली या टाइपोग्राफिकल त्रुटि, इस संदर्भ में \\\"bacon\\\" अधिक उपयुक्त है।\"\n\t\t\t}\n\t\t}\n\t],\n\"correction_quill\": [{\"insert\":\"Il y avait \"},{\"insert\":\"eux\",\"attributes\":{\"link\":\"0\"}},{\"insert\":\"; ils étaient assis dans le canapé en train de regarder la télé quand il a décidé de leur faire cuire le dîner. Il est allé au frigo et a pris le \"},{\"insert\":\"poulet\",\"attributes\":{\"link\":\"1\"}},{\"insert\":\" et les œufs. Il a allumé la cuisinière mais a accidentellement appuyé sur le \"},{\"insert\":\"gaz\",\"attributes\":{\"link\":\"2\"}},{\"insert\":\" et les œufs ont volé en éclaboussant le comptoir. Il pensait que c'était sans importance, alors il les a simplement essuyés et a mis le \"},{\"insert\":\"bacon\",\"attributes\":{\"link\":\"3\"}},{\"insert\":\" dans la poêle. Alors qu'il faisait frire le \"},{\"insert\":\"bacon\",\"attributes\":{\"link\":\"3\"}},{\"insert\":\" il s'est rendu compte qu'il avait fait une erreur de lecture parce qu'il voulait en fait faire cuire du bacon. Il est ensuite allé au magasin acheter la bonne nourriture et leur a préparé un délicieux dîner.\\\\n\"}],\n\t\"suggestion\": \"Alors qu'ils étaient assis dans le canapé à regarder la télévision, il a décidé de leur préparer le dîner. Il est allé au frigo et a sorti du poulet et des œufs. Il a allumé la cuisinière, mais en appuyant accidentellement sur le gaz, les œufs ont explosé et éclaboussé le comptoir. Il a pensé que ce n'était pas grave, a nettoyé le désordre, puis a mis le bacon dans la poêle. Pendant que le bacon cuisait, il s'est rendu compte de son erreur de lecture : il voulait faire cuire du poulet, et non du bacon. Il est donc retourné au magasin pour acheter les bons ingrédients et leur a finalement préparé un délicieux dîner.\"\n}"),
    TextPart("sentence: Jina langu ni Loïc Yabili, mimi na tumikaka mu computer science since miaka mingi, mina pendaka sana ku fanya ma software za mingi!"),
    TextPart("result: {\n\t\"sentence_lang\": \"sw\",\n\t\"correction\": \"Jina langu ni Loïc Yabili, mimi ni mtumiaji wa computer science toka miaka mingi, napenda sana ku fanya ma software ya mingi!\",\n\t\"edits\": [\n\t\t{\n\t\t\t\"old\": \"langue\",\n\t\t\t\"new\": \"langu\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Grammatical error\",\n\t\t\t\t\"fr\": \"Erreur grammaticale\",\n\t\t\t\t\"sw\": \"Hitilafu ya kisarufi\",\n\t\t\t\t\"li\": \"Esobe ya makambo ya orthographe\",\n\t\t\t\t\"hi\": \"व्याकरणिक त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"tumikaka\",\n\t\t\t\"new\": \"mtumiaji\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Spelling or vocabulary error\",\n\t\t\t\t\"fr\": \"Erreur d'orthographe ou de vocabulaire\",\n\t\t\t\t\"sw\": \"Hitilafu ya tahajia au msamiati\",\n\t\t\t\t\"li\": \"Esobe ya vocabulaire au orthographe\",\n\t\t\t\t\"hi\": \"वर्तनी या शब्दावली त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"mina\",\n\t\t\t\"new\": \"na\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \" Spelling error or incorrect use of a particle\",\n\t\t\t\t\"fr\": \"Erreur d'orthographe ou d'utilisation incorrecte d'une particule\",\n\t\t\t\t\"sw\": \"Hitilafu ya tahajia au matumizi yasiyo sahihi ya chembe\",\n\t\t\t\t\"li\": \"Esobe ya orthographe au ya lisolo\",\n\t\t\t\t\"hi\": \"वर्तनी त्रुटि या अनुचित कण का प्रयोग\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"pendaka\",\n\t\t\t\"new\": \"napenda\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Spelling or conjugation error\",\n\t\t\t\t\"fr\": \"Erreur d'orthographe ou de conjugaison\",\n\t\t\t\t\"sw\": \"Hitilafu ya tahajia au ya muundo wa kitenzi\",\n\t\t\t\t\"li\": \"Esobe ya orthographe to ya kokoma\",\n\t\t\t\t\"hi\": \"वर्तनी या संयुग्मन त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"fanya\",\n\t\t\t\"new\": \"ku fanya\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Omission of the infinitive particle error\",\n\t\t\t\t\"fr\": \"Erreur d'omission de la particule d'infinitif\",\n\t\t\t\t\"sw\": \"Hitilafu ya kuacha chembe ya infinitive\",\n\t\t\t\t\"li\": \"Esobe ya kolongola likambo ya infinitive\",\n\t\t\t\t\"hi\": \"अनंत कण की चूक\"\n\t\t\t}\n\t\t}\n\t],\n\"correction_quill\": [{\"insert\":\"Jina \"},{\"insert\":\"langu\",\"attributes\":{\"link\":\"0\"}},{\"insert\":\" ni Loïc Yabili, mimi ni \"},{\"insert\":\"mtumiaji\",\"attributes\":{\"link\":\"1\"}},{\"insert\":\" wa computer science toka miaka mingi, \"},{\"insert\":\"na\",\"attributes\":{\"link\":\"2\"}},{\"insert\":\" \"},{\"insert\":\"napenda\",\"attributes\":{\"link\":\"3\"}},{\"insert\":\" sana \"},{\"insert\":\"ku fanya\",\"attributes\":{\"link\":\"4\"}},{\"insert\":\" ma software ya mingi!\\\\n\"}],\n\t\"suggestion\": \"Jina langu ni Loïc Yabili. Mimi ni mtaalamu wa sayansi ya kompyuta kwa miaka mingi na napenda sana kutengeneza programu mbalimbali.\"\n}"),
    TextPart("sentence: Hello,\n\nMy name is John Doe, I am one of the most popular personality in this world because many persons know my name but doesn't know how is my face look like 😳.\n\nI am writing this message to notice you that I am looking for someone who can replace my name so developer will not use it anymore!!! I am very tired, if that don't change I will take to court I have the lawyer of this continents is name is Mr Mr Saul Goodman."),
    TextPart("result: {\n\t\"sentence_lang\": \"en\",\n\t\"correction\": \"Hello,\\n\\nMy name is John Doe, I am one of the most popular personalities in this world because many people know my name but don't know what I look like 😳.\\n\\nI am writing this message to notify you that I am looking for someone who can replace my name so developers will not use it anymore!!! I am very tired, and if that doesn't change, I will take you to court. I have the best lawyer on this continent; his name is Mr. Saul Goodman.\",\n\t\"edits\": [\n\t\t{\n\t\t\t\"old\": \"persons\",\n\t\t\t\"new\": \"people\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Usage or lexical choice error\",\n\t\t\t\t\"fr\": \"Erreur d'usage ou de choix lexical\",\n\t\t\t\t\"sw\": \"Hitilafu ya matumizi au uchaguzi wa msamiati\",\n\t\t\t\t\"li\": \"Esobe ya kokoma au ya lisolo\",\n\t\t\t\t\"hi\": \"उपयोग या शब्द चयन त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"how\",\n\t\t\t\"new\": \"what\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Vocabulary or interrogative form error\",\n\t\t\t\t\"fr\": \"Erreur de vocabulaire ou de forme interrogative\",\n\t\t\t\t\"sw\": \"Hitilafu ya msamiati au ya muundo wa kiulizo\",\n\t\t\t\t\"li\": \"Esobe ya vocabulaire au kokoma\",\n\t\t\t\t\"hi\": \"शब्द चयन या प्रश्नात्मक रूप त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"notice\",\n\t\t\t\"new\": \"notify\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Vocabulary error\",\n\t\t\t\t\"fr\": \"Erreur de vocabulaire\",\n\t\t\t\t\"sw\": \"Hitilafu ya msamiati\",\n\t\t\t\t\"li\": \"Esobe ya lisolo\",\n\t\t\t\t\"hi\": \"शब्द चयन त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"continents\",\n\t\t\t\"new\": \"continent\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Grammatical number error\",\n\t\t\t\t\"fr\": \"Erreur de nombre grammatical\",\n\t\t\t\t\"sw\": \"Hitilafu ya idadi ya kimaumbile\",\n\t\t\t\t\"li\": \"Esobe ya kokoma na nombre ya mboka\",\n\t\t\t\t\"hi\": \"व्याकरणात्मक संख्या त्रुटि\"\n\t\t\t}\n\t\t}\n\t],\n\"correction_quill\": [{\"insert\":\"Hello, \"},{\"insert\":\"\\nMy name is John Doe, I am one of the most popular personalities in this world because many \"},{\"insert\":\"people\",\"attributes\":{\"link\":\"0\"}},{\"insert\":\" know my name but don't know \"},{\"insert\":\"what\",\"attributes\":{\"link\":\"1\"}},{\"insert\":\" I look like 😳.\\n\\nI am writing this message to \"},{\"insert\":\"notify\",\"attributes\":{\"link\":\"2\"}},{\"insert\":\" you that I am looking for someone who can replace my name so developers will not use it anymore!!! I am very tired, and if that doesn't change, I will take you to court. I have the best lawyer on this \"},{\"insert\":\"continent\",\"attributes\":{\"link\":\"3\"}},{\"insert\":\"; his name is Mr. Saul Goodman.\\\\n\"}],\n\t\"suggestion\": \"Hello,\\n\\nMy name is John Doe, I am one of the most famous people in the world since a lot of people recognize my name, but they don't know what I look like. So this is why I'm contacting you.\\nI am looking for someone who can use another name so that developers will not use my name anymore! I am tired of it and I will take legal actions if necessary. My lawyer on this continent is Saul Goodman.\"\n}"),
    TextPart("sentence: There their they where siting in the couch watching TV when he decide to cook them dinner. He went to the fridge and grab the break and eggs. He turn on the stove but accidental hit the break and the eggs flew scattering in the counter. He thought that it would be irregardless so he just mop them up and put the break in the pan. As he was frying the break, he realize that he had made a spoonirsm error because he actually wanted to cook bacon. He then went to the store to buy the right food and made them a delicious dinner."),
    TextPart("result: {\n\t\"sentence_lang\": \"en\",\n\t\"correction\": \"There, they were sitting in the couch watching TV when he decided to cook them dinner. He went to the fridge and grabbed the eggs and bacon. He turned on the stove but accidentally hit the gas and the eggs flew scattering on the counter. He thought that it would be irrelevant so he just mopped them up and put the bacon in the pan. As he was frying the bacon, he realized that he had made a spoonerism error because he actually wanted to cook bacon. He then went to the store to buy the right food and made them a delicious dinner.\",\n\t\"edits\": [\n\t\t{\n\t\t\t\"old\": \"where\",\n\t\t\t\"new\": \"were\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Spelling or misuse error\",\n\t\t\t\t\"fr\": \"Erreur d'orthographe ou mauvaise utilisation\",\n\t\t\t\t\"sw\": \"Hitilafu ya tahajia au matumizi yasiyo sahihi\",\n\t\t\t\t\"li\": \"Esobe ya kokoma au kosolola\",\n\t\t\t\t\"hi\": \"वर्तनी या गलत उपयोग त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"siting\",\n\t\t\t\"new\": \"sitting\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Spelling error\",\n\t\t\t\t\"fr\": \"Erreur d'orthographe\",\n\t\t\t\t\"sw\": \"Hitilafu ya tahajia\",\n\t\t\t\t\"li\": \"Esobe ya kokoma\",\n\t\t\t\t\"hi\": \"वर्तनी त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"decide\",\n\t\t\t\"new\": \"decided\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"tense error\",\n\t\t\t\t\"fr\": \"erreur de temps\",\n\t\t\t\t\"sw\": \"kosa la wakati\",\n\t\t\t\t\"li\": \"libunga ya ntango\",\n\t\t\t\t\"hi\": \"काल त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"grab\",\n\t\t\t\"new\": \"grabbed\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"tense error\",\n\t\t\t\t\"fr\": \"erreur de temps\",\n\t\t\t\t\"sw\": \"kosa la wakati\",\n\t\t\t\t\"li\": \"libunga ya ntango\",\n\t\t\t\t\"hi\": \"काल त्रुटि\"\n\t\t\t}\n\t\t},\n{\n\t\t\t\"old\": \"break\",\n\t\t\t\"new\": \"bacon\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \" Vocabulary error, \\\"bacon\\\" is more appropriate in the context\",\n\t\t\t\t\"fr\": \"Erreur de vocabulaire, \\\"bacon\\\" est plus approprié dans le contexte\",\n\t\t\t\t\"sw\": \"Hitilafu ya msamiati, \\\"bacon\\\" inafaa zaidi katika muktadha huu\",\n\t\t\t\t\"li\": \"Esobe ya lisolo, \\\"bacon\\\" ezali motuya ya solo\",\n\t\t\t\t\"hi\": \"शब्दावली त्रुटि, \\\"bacon\\\" संदर्भ में अधिक उपयुक्त है\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"turn\",\n\t\t\t\"new\": \"turned\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"tense error\",\n\t\t\t\t\"fr\": \"erreur de temps\",\n\t\t\t\t\"sw\": \"kosa la wakati\",\n\t\t\t\t\"li\": \"libunga ya ntango\",\n\t\t\t\t\"hi\": \"काल त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"accidental\",\n\t\t\t\"new\": \"accidentally\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Word form or adverb usage error\",\n\t\t\t\t\"fr\": \"Erreur de forme de mot ou de mauvais usage de l'adverbe\",\n\t\t\t\t\"sw\": \"Hitilafu ya umbo la neno au matumizi yasiyo sahihi ya kivumishi\",\n\t\t\t\t\"li\": \"Esobe ya form ya motuya au ya kokoma\",\n\t\t\t\t\"hi\": \" शब्द रूप या क्रिया-विशेषण के उपयोग की त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"irregardless\",\n\t\t\t\"new\": \"irrelevant\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Vocabulary error or word choice error\",\n\t\t\t\t\"fr\": \"Erreur de vocabulaire ou mauvais choix de mot\",\n\t\t\t\t\"sw\": \"Hitilafu ya msamiati au uchaguzi usiofaa wa neno\",\n\t\t\t\t\"li\": \"Esobe ya lisolo au ya kokoma\",\n\t\t\t\t\"hi\": \"शब्द चयन त्रुटि या शब्द उपयोग त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"mop\",\n\t\t\t\"new\": \"mopped\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"tense error\",\n\t\t\t\t\"fr\": \"erreur de temps\",\n\t\t\t\t\"sw\": \"kosa la wakati\",\n\t\t\t\t\"li\": \"libunga ya ntango\",\n\t\t\t\t\"hi\": \"काल त्रुटि\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"old\": \"spoonirsm\",\n\t\t\t\"new\": \"spoonerism\",\n\t\t\t\"reasons\": {\n\t\t\t\t\"en\": \"Spelling error\",\n\t\t\t\t\"fr\": \"Erreur d'orthographe\",\n\t\t\t\t\"sw\": \"Hitilafu ya tahajia\",\n\t\t\t\t\"li\": \"Esobe ya kokoma\",\n\t\t\t\t\"hi\": \"वर्तनी त्रुटि\"\n\t\t\t}\n\t\t}\n\t],\n\"correction_quill\": [{\"insert\":\"There, they \"},{\"insert\":\"were\",\"attributes\":{\"link\":\"0\"}},{\"insert\":\" sitting\",\"attributes\":{\"link\":\"1\"}},{\"insert\":\"in the couch watching TV when he \"},{\"insert\":\"decided\",\"attributes\":{\"link\":\"2\"}},{\"insert\":\" to cook them dinner. He went to the fridge and \"},{\"insert\":\"grabbed\",\"attributes\":{\"link\":\"3\"}},{\"insert\":\" the eggs and \"},{\"insert\":\"bacon\",\"attributes\":{\"link\":\"4\"}},{\"insert\":\". He \"},{\"insert\":\"turned\",\"attributes\":{\"link\":\"5\"}},{\"insert\":\" on the stove but \"},{\"insert\":\"accidentally\",\"attributes\":{\"link\":\"6\"}},{\"insert\":\" hit the gas and the eggs flew scattering on the counter. He thought that it would be \"},{\"insert\":\"irrelevant\",\"attributes\":{\"link\":\"7\"}},{\"insert\":\" so he just \"},{\"insert\":\"mopped\",\"attributes\":{\"link\":\"8\"}},{\"insert\":\" them up and put the bacon in the pan. As he was frying the bacon, he realized that he had made a \"},{\"insert\":\"spoonerism\",\"attributes\":{\"link\":\"9\"}},{\"insert\":\" error because he actually wanted to cook bacon. He then went to the store to buy the right food and made them a delicious dinner.\\\\n\"}],\n\t\"suggestion\": \"They were sitting on the couch watching TV when he decided to cook them dinner. He went to the fridge and took out the eggs and bacon. He turned on the stove and accidentally hit the gas burner. The eggs flew out of the pan and splattered on the counter, but he decided that it was no big deal and just cleaned them up. Then he put the bacon in the pan and started to fry it. But as he was cooking, he realized that he had made a mistake and that he actually wanted to cook bacon. He quickly went back to the store and bought the right food, and then he cooked them a delicious dinner.\"\n}"),
  ];
  late final GenerativeModel model;

  AssistantController() {
    model = GenerativeModel(
      model: 'gemini-pro',
      apiKey: apiKey,
      generationConfig: GenerationConfig(
        maxOutputTokens: 2048,
      ),
    );
  }

  Future<AssistantResultModel?> check(String input) async {
    if (input.isEmpty) {
      return null;
    }

    try {
      final response = await model.generateContent(
        [
          Content.multi(
              [
                ... parts,
                TextPart("sentence: $input"),
                TextPart("result: "),
              ]
          )
        ],
      );

      if (response.text == null) {
        return null;
      }

      return AssistantResultModel.fromJson(jsonDecode(response.text!));
    }
    catch (err) {
      debugPrint('=====> Check ERROR: $err');
    }
    return null;
  }

}